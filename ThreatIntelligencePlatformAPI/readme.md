# Threat Intelligence Platform

## 5. ТЕСТИРОВАНИЕ И ОПТИМИЗАЦИЯ

### 5.1 План тестирования

В рамках тестирования программной системы были выбраны и реализованы модульные тесты (unit-тестирование) с применением фреймворка xUnit, что позволило изолированно протестировать логику отдельных сервисов системы без необходимости запуска всей инфраструктуры. Модульное тестирование признано наиболее предпочтительным для данной системы, поскольку архитектура приложения реализована с четким разделением бизнес-логики и инфраструктурных зависимостей (в том числе через внедрение зависимостей), что обеспечивает легкость изоляции и возможность подмены внешних зависимостей через Mock.

Проводились тесты следующих компонентов:
• AuthService — проверка аутентификации и авторизации пользователей;
• UserService — создание, обновление, удаление пользователей, получение данных;
• RoleService — получение ролей, проверка связей пользователей и ролей.
• IoCService – получение индикаторов компрометации

Каждый сервис был протестирован с учетом граничных условий, включая неверные входные данные, отсутствующие пользователи, пустые поля, и др. Это обеспечивает устойчивость системы в условиях непредсказуемых пользовательских вводов.

При построении сложных архитектурных решений, особенно в контексте микросервисной архитектуры, критически важно обеспечить корректное взаимодействие между всеми компонентами системы. В таких случаях интеграционное тестирование становится незаменимым инструментом для верификации работоспособности системы в целом.

Интеграционное тестирование позволяет выявить проблемы взаимодействия между различными компонентами системы, проверить корректность передачи данных между сервисами и убедиться в правильной работе всей системы как единого целого. Однако важно отметить, что качественное интеграционное тестирование требует значительных ресурсов: необходимо развернуть тестовое окружение, подготовить тестовые данные, разработать и поддерживать тестовые сценарии, что делает этот процесс достаточно затратным с точки зрения времени и ресурсов.

В качестве альтернативы полному интеграционному тестированию, особенно на ранних этапах разработки, может быть использовано ручное тестирование. Ручное тестирование представляет собой процесс, при котором тестировщик вручную выполняет тестовые сценарии без использования автоматизированных инструментов. Этот подход позволяет быстро получить обратную связь о работоспособности системы и выявить очевидные проблемы.

В рамках данного проекта было проведено ручное тестирование с использованием синтетических данных. Для этого был разработан специальный модуль, который публикует тестовые данные в очередь ненормализованных IoC RabbitMQ. После публикации данные проходят все этапы обработки и записываются в базу данных. Для верификации корректности работы системы был выполнен запрос к API для получения опубликованных тестовых данных, что позволило убедиться в правильности всего процесса обработки данных от момента их публикации до финального сохранения.

### 5.2 Результаты тестирования и оптимизация

В данном разделе представлены результаты проведенного тестирования программной системы Threat Intelligence Platform в соответствии с разработанным планом. Тестирование проводилось для основных компонентов системы с использованием модульных тестов.

Процесс тестирования сервиса индикаторов компрометации включал проверку основной функциональности для работы с данными об угрозах.

Этапы тестирования:
• Загрузка данных (LoadAsync) - проверка корректной работы метода для получения индикаторов с возможностью фильтрации и пагинации.
• Сохранение данных (StoreAsync) - верификация процесса сохранения новых индикаторов через gRPC-клиент.
• Подсчет количества индикаторов (CountAsync) - проверка корректного получения общего количества индикаторов.
• Анализ распределения по типам (CountByTypeAsync, CountSpecificTypeAsync и другие) – тестирование функций статистического анализа данных.

Результаты тестирования:
В результате тестирования все тесты для сервиса IoC были успешно пройдены. Сервис корректно взаимодействует с gRPC-клиентом для выполнения всех необходимых операций с данными.

Ручное тестирование с использованием синтетических данных подтвердило корректность работы всей системы. Тестовые данные успешно прошли все этапы обработки: от публикации в очередь RabbitMQ до сохранения в базе данных и последующего получения через API. Это позволило убедиться в правильности работы всех компонентов системы в их взаимодействии друг с другом, включая корректность преобразования форматов данных и их сохранения.

Процесс ручного тестирования начался с развертывания приложения. Были настроены и запущены все необходимые сервисы, проверена их доступность и корректность конфигурации.

Следующим этапом стал запуск сервиса с синтетическими данными. Тестовый набор данных был опубликован в очередь RabbitMQ, после чего проверена корректность их обработки и сохранения в базе.

После публикации данных была выполнена прямая проверка в базе данных с помощью SQL-запроса для верификации корректности сохранения и преобразования данных. Запрос позволил убедиться, что все тестовые индикаторы были успешно сохранены с правильными типами данных, значениями и дополнительными атрибутами.

Завершающим этапом стало тестирование API. Были проверены эндпоинты, валидированы форматы ответов и протестированы механизмы фильтрации и пагинации.

В процессе тестирования была выявлена проблема производительности при работе с большими объемами данных. В качестве оптимизации был модифицирован метод LoadAsync с использованием асинхронного потокового взаимодействия (gRPC streaming), что позволило снизить нагрузку на память при обработке больших наборов индикаторов и уменьшить время выполнения запросов.

Результаты оптимизации подтверждены повторным тестированием, которое показало значительное улучшение производительности при работе с большими объемами данных.

## Биология: Задание и таблица генетического кода

**Условие задания:**

3. Фрагмент иРНК имеет следующую последовательность: ГГУАГГЦЦЦЦУГУГЦЦАУЦ
Определите последовательность участка ДНК, послужившего матрицей для синтеза этой молекулы РНК, и последовательность белка, которая кодируется этим фрагментом иРНК. При выполнении задания воспользуйтесь правилом комплементарности и таблицей генетического кода.

**Таблица генетического кода:**

| Первое основание | Второе основание |   У   |   Ц   |   А   |   Г   | Третье основание |
|------------------|------------------|-------|-------|-------|-------|------------------|
| У                |                  |       |       |       |       |                  |
|                  |                  | Фен   | Сер   | Тир   | Цис   | У                |
|                  |                  | Фен   | Сер   | Тир   | Цис   | Ц                |
|                  |                  | Лей   | Сер   | —     | —     | А                |
|                  |                  | Лей   | Сер   | —     | Три   | Г                |
| Ц                |                  |       |       |       |       |                  |
|                  |                  | Лей   | Про   | Гис   | Арг   | У                |
|                  |                  | Лей   | Про   | Гис   | Арг   | Ц                |
|                  |                  | Лей   | Про   | Глн   | Арг   | А                |
|                  |                  | Лей   | Про   | Глн   | Арг   | Г                |
| А                |                  |       |       |       |       |                  |
|                  |                  | Иле   | Тре   | Асн   | Сер   | У                |
|                  |                  | Иле   | Тре   | Асн   | Сер   | Ц                |
|                  |                  | Иле   | Тре   | Лиз   | Арг   | А                |
|                  |                  | Мет   | Тре   | Лиз   | Арг   | Г                |
| Г                |                  |       |       |       |       |                  |
|                  |                  | Вал   | Ала   | Асп   | Гли   | У                |
|                  |                  | Вал   | Ала   | Асп   | Гли   | Ц                |
|                  |                  | Вал   | Ала   | Глу   | Гли   | А                |
|                  |                  | Вал   | Ала   | Глу   | Гли   | Г                |

*Примечание: для поиска аминокислоты используйте первый нуклеотид из левого вертикального ряда, второй — из верхнего горизонтального ряда, третий — из правого вертикального ряда.*

## Решение задания по биологии

### Условие
Фрагмент иРНК имеет следующую последовательность: **ГГЦАГЦЦЦЦУГЦАУЦ**

Определите:
- последовательность участка ДНК, послужившего матрицей для синтеза этой молекулы РНК
- последовательность белка, которая кодируется этим фрагментом иРНК

### Шаг 1. Определяем матричную цепь ДНК

Используем правило комплементарности (в РНК вместо Т — У):
- Г (G) → Ц (C)
- Ц (C) → Г (G)
- А (A) → Т (T)
- У (U) → А (A)

**иРНК:** Г Г Ц А Г Ц Ц Ц Ц У Г Ц А У Ц
**ДНК:**  Ц Ц Г Т Ц Г Г Г Г А Ц Г Т А Г

**Ответ: последовательность ДНК (матрица):**
> ЦЦГТЦГГГГАЦГТАГ

### Шаг 2. Разделяем иРНК на триплеты (кодоны)

ГГЦ | АГЦ | ЦЦЦ | ЦУГ | ЦАУ | Ц

Последний кодон (Ц) неполный, его не учитываем.

### Шаг 3. Определяем аминокислоты по таблице генетического кода

#### 1) ГГЦ
- Первое основание: Г
- Второе основание: Г
- Третье основание: Ц
- По таблице: **Гли (Глицин)**

#### 2) АГЦ
- Первое основание: А
- Второе основание: Г
- Третье основание: Ц
- По таблице: **Сер (Серин)**

#### 3) ЦЦЦ
- Первое основание: Ц
- Второе основание: Ц
- Третье основание: Ц
- По таблице: **Про (Пролин)**

#### 4) ЦУГ
- Первое основание: Ц
- Второе основание: У
- Третье основание: Г
- По таблице: **Лей (Лейцин)**

#### 5) ЦАУ
- Первое основание: Ц
- Второе основание: А
- Третье основание: У
- По таблице: **Глн (Глутамин)**

### Итоговый ответ

- **ДНК (матрица):** ЦЦГТЦГГГГАЦГТАГ
- **Белок:** Гли — Сер — Про — Лей — Глн